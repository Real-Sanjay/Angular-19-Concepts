 ngOnDestroy() â€” Final Lifecycle Hook
Definition
ngOnDestroy() is a lifecycle hook Angular calls just before destroying the component instance.

Itâ€™s primarily used for:
Cleanup logic 
Avoiding memory leaks 
Unsubscribing from observables
Stopping timers, intervals, or event listeners

Example Scenario
AppComponent (Parent)
ts
export class AppComponent {
  displayComponent = true;

  toggleComponent() {
    this.displayComponent = !this.displayComponent;
  }
}
âœ… AppComponent Template
html
<button (click)="toggleComponent()">Show / Hide Test Component</button>
<app-test *ngIf="displayComponent"></app-test>
âœ… TestComponent (Child)
ts
import { Component, OnInit, OnDestroy } from '@angular/core';

@Component({
  selector: 'app-test',
  template: `<p>Test Component Content</p>`
})
export class TestComponent implements OnInit, OnDestroy {
  
  ngOnInit(): void {
    console.log('TestComponent - Initialized');
  }

  ngOnDestroy(): void {
    console.log('TestComponent - Destroyed');
  }
}

ğŸ–¥ï¸ Console Output
App loads â†’ TestComponent - Initialized

Click Hide â†’ TestComponent - Destroyed

Click Show â†’ TestComponent - Initialized again

Perfect ğŸ‘Œ This shows the lifecycle in action â€” create â destroy â recreate.

ğŸ“¦ Real-World Use Cases for ngOnDestroy()
Use Case	                    What You Do in ngOnDestroy()
ğŸ” RxJS Subscriptions	        subscription.unsubscribe()
â²ï¸ Timers / Intervals	        clearTimeout() / clearInterval()
ğŸ“¡ WebSocket / API Listeners	socket.disconnect()
ğŸŒ Global Event Listeners	    window.removeEventListener()
ğŸ—ƒï¸ LocalStorage Cleanup	     localStorage.removeItem() or similar

âš ï¸ Special Notes
ngOnDestroy() is not called when:
User refreshes the browser
User closes the tab or window

For those cases, use:

ts
@HostListener('window:beforeunload', ['$event'])
unloadHandler(event: any) {
  // custom logic
}

ğŸ” Angular Component Lifecycle Summary
Hereâ€™s a simplified diagram of Angularâ€™s component lifecycle:

ngOnChanges()         â†’ Called when @Input() changes (first + subsequent times)
ngOnInit()            â†’ Called once after first ngOnChanges
ngDoCheck()           â†’ Called every change detection cycle
ngAfterContentInit()  â†’ After content (ng-content) is projected
ngAfterContentChecked() â†’ After every check of projected content
ngAfterViewInit()     â†’ After componentâ€™s view (and child views) initialized
ngAfterViewChecked()  â†’ After every check of the componentâ€™s view
ngOnDestroy()         â†’ Cleanup before destroying component

ğŸ¯ Summary
ngOnDestroy() is your cleanup hook
Always unsubscribe, stop timers, and detach listeners
Itâ€™s not for page refresh or browser close â€” use HostListener for that
Part of a rich lifecycle that gives you fine control over component behavior

